
{% extends 'base.html' %}
{% load static %}
{% block title %} List of Favorite Products {% endblock %}

{% block content %}
<div class="container">
    <br>
    <h2 style="text-align: center; color: #0e3768">Favorite Products</h2>
    <br>
    <div class="row">
        {% for favorite in list_of_favorites %}
        <div class="col-md-4 d-flex align-items-stretch"> <!-- Use 'd-flex' and 'align-items-stretch' to make cards equal height -->
            <div class="card mb-4 shadow-sm" style="width: 100%; flex-direction: column;"> <!-- Ensure card takes full width and content is column directed -->
                <img src="{{ favorite.product.image.url }}" alt="{{ favorite.product.name }}" class="card-img-top" style="object-fit: cover; height: 400px;"> <!-- Fixed image height -->
                <div class="card-body d-flex flex-column"> <!-- Flex column for internal card body -->
                    <h5 class="card-title">{{ favorite.product.name }}</h5> <!-- Product name as card title -->
                    <p> Price: {{ favorite.product.price }} RON </p>
                    <div class="average-rating" style="display: flex; justify-content: space-between; align-items: center;">
                        <span title="{{ favorite.product.average_rating }}/5">
                            Average Rating:
                            {% for i in "12345" %}
                                {% if forloop.counter <= favorite.product.full_stars %}
                                    <i class="bi bi-star-fill"></i>
                                {% elif forloop.counter == favorite.product.full_stars|add:"1" and favorite.product.half_star %}
                                    <i class="bi bi-star-half"></i>
                                {% else %}
                                    <i class="bi bi-star"></i>
                                {% endif %}
                            {% endfor %}
                        </span>
                    </div>
                    <br>
                    <div class="mt-auto"> <!-- Push buttons to the bottom -->
                        <a href="{% url 'product-details' favorite.product.id %}" class="btn btn-sm btn-outline-success">View</a>
                        <a href="{% url 'remove_favorite' favorite.product.id %}" class="btn btn-sm btn-outline-danger">Remove from Favorites</a>
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
        <p>You have no favorite products.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}



